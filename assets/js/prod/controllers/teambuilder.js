app.controller("teamCtrl",["$scope","$document","$timeout","$http",function($scope,$document,$timeout,$http){function buildTeamJQ(){var memCount=0,mobileVersion=!1,desktop={init:function(){}};"undefined"!=typeof window.orientation&&(mobileVersion=!0,mobile.init()),desktop.init(),add=function(name,dad){var member=$("#memberOne").val(),container=$(dad?"."+dad:".members");return(0!=member||name&&name.length>0)&&(memCount++,member="string"==typeof name?name:member,container.prepend("<div id=member-"+memCount+' draggable="true" ondragstart="drag(event)" class="member hidden">'+member+'<span class="material-icons del right">clear</span></div>'),$pos=$("#positionBox").clone(),$pos.removeAttr("id").addClass("positionBox").appendTo("#member-"+memCount),$posForm=$pos.children(".positionForm"),$posForm.children(".btnAddPosition").click(function(e){e.stopPropagation();var $input=$(this).siblings("input"),posVal=$input.val();if(posVal){var posTxt=$posForm.siblings("span");posTxt.removeClass("hidden").val(posVal),posTxt.html("Position: "+posVal),$posForm.fadeOut(),$input.val("")}}),$posForm.children("input, label").click(function(e){e.stopPropagation()}),$posForm.children("input").bind("keypress",function(event){13==event.which&&(event.preventDefault(),$(this).siblings(".btnAddPosition").trigger("click"))}),$("#member-"+memCount).fadeIn(function(){$(this).removeClass("hidden")}),$("#memberOne").val(""),$("#member-"+memCount).find(".del").click(function(e){e.stopPropagation(),$(this).parent().fadeOut(200,function(){$(this).remove()})}),$("#member-"+memCount).on("click",function(){$(this).find(".positionForm").toggle(200),$(this).find("input").focus(),$(this).hasClass("hidden")&&$(this).removeClass("hidden")})),!0},$("#btnAddMember").click(add),$("#memberOne").bind("keypress",function(event){13==event.which&&(event.preventDefault(),$("#btnAddMember").trigger("click"))})}buildTeamJQ(),loadNames=function(){var teststruc={},responsePromise=$http.get("/getTeams/ss");responsePromise.success(function(data,status,headers,config){data[0]&&(teststruc={list:data[0].teststruc.list,team1:data[0].teststruc.team1,team2:data[0].teststruc.team2,team3:data[0].teststruc.team3},$.each(teststruc.list,function(index,element){add(element,"members")}),$.each(teststruc.team1,function(index,element){add(element,"team1")}),$.each(teststruc.team2,function(index,element){add(element,"team2")}),$.each(teststruc.team3,function(index,element){add(element,"team3")}))})},$scope.saveNames=function(){var teststruc={name:"ss",list:[],team1:[],team2:[],team3:[]};$.each($(".members").find(".member"),function(index,element){teststruc.list.push($(element).html().split("<")[0])}),$.each($(".team1").find(".member"),function(index,element){teststruc.team1.push($(element).html().split("<")[0])}),$.each($(".team2").find(".member"),function(index,element){teststruc.team2.push($(element).html().split("<")[0])}),$.each($(".team3").find(".member"),function(index,element){teststruc.team3.push($(element).html().split("<")[0])});var responsePromise=$http.post("/saveTeams/",teststruc);responsePromise.success(function(data,status,headers,config){})},$timeout(function(){loadNames()},1e3)}]);