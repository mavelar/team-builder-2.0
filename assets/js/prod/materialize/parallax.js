!function($){$.fn.parallax=function(){var window_width=$(window).width();return this.each(function(i){function updateParallax(initial){var container_height;container_height=601>window_width?$this.height()>0?$this.height():$this.children("img").height():$this.height()>0?$this.height():500;var $img=$this.children("img").first(),img_height=$img.height(),parallax_dist=img_height-container_height,bottom=$this.offset().top+container_height,top=$this.offset().top,scrollTop=$(window).scrollTop(),windowHeight=window.innerHeight,windowBottom=scrollTop+windowHeight,percentScrolled=(windowBottom-top)/(container_height+windowHeight),parallax=Math.round(parallax_dist*percentScrolled);initial&&$img.css("display","block"),bottom>scrollTop&&scrollTop+windowHeight>top&&$img.css("transform","translate3D(-50%,"+parallax+"px, 0)")}var $this=$(this);$this.addClass("parallax"),$this.children("img").one("load",function(){updateParallax(!0)}).each(function(){this.complete&&$(this).load()}),$(window).scroll(function(){window_width=$(window).width(),updateParallax(!1)}),$(window).resize(function(){window_width=$(window).width(),updateParallax(!1)})})}}(jQuery);